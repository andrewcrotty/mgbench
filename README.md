# MgBench
A new analytical benchmark for machine-generated log data.

## Data

1. **bench1:** http://cs.brown.edu/people/acrotty/mgbench/bench1.tar.gz
2. **bench2:** http://cs.brown.edu/people/acrotty/mgbench/bench2.tar.gz
3. **bench3:** http://cs.brown.edu/people/acrotty/mgbench/bench3.tar.gz

## Preliminary Results

All experiments were conducted on a `r5.12xlarge` EC2 instance (48 vCPU, 384 GiB memory). Times are reported in seconds.

### Benchmark 1

| System       | Load       | Q1        | Q2        | Q3        | Q4        | Q5        | Q6        |
| :----------- | :--------: | :-------: | :-------: | :-------: | :-------: | :-------: | :-------: |
| ClickHouse   | **11.6**   | 0.007     | 0.010     | 0.009     | 0.009     | 0.023     | 0.017     |
| CrateDB      | 1088.347   | 0.013     | 0.011     | 0.023     | 0.015     | 1.387     | 0.337     |
| Druid        | 472.177    | 0.042     | N/A       | 0.061     | 0.032     | 0.134     | 0.137     |
| Hyper        | 29.735     | **0.003** | 0.003     | **0.006** | **0.003** | **0.009** | **0.010** |
| MonetDB      | 52.989     | 0.016     | 0.005     | 0.031     | 0.009     | 0.020     | 0.069     |
| PostgreSQL   | 133.738    | 0.879     | 0.766     | 0.958     | 0.868     | 1.198     | 2.574     |
|  +Index Time | 145.596    | 0.876     | 0.765     | 0.958     | 1.292     | 1.202     | 2.575     |
|  +Index All  | 403.432    | 0.129     | 0.005     | 0.047     | 0.563     | 1.501     | 0.457     |
| SparkSQL     | 14.812     | 0.106     | 0.081     | 0.213     | 0.109     | 0.259     | 0.282     |
| TimescaleDB  | 201.411    | 0.346     | 0.394     | 0.722     | 0.382     | 1.597     | 3.519     |
|  +Index All  | 400.749    | 0.010     | **0.001** | 0.014     | 0.069     | 1.298     | 0.152     |

### Benchmark 2

| System       | Load       | Q1        | Q2        | Q3        | Q4        | Q5        | Q6        |
| :----------- | :--------: | :-------: | :-------: | :-------: | :-------: | :-------: | :-------: |
| ClickHouse   | **14.7**   | 0.004     | 0.025     | 0.084     | 0.031     | 0.217     | 0.312     |
| CrateDB      | N/A        | 0.009     | 0.089     | 3.699     | 1.789     | 13.619    | 11.282    |
| Druid        | 1064.712   | 0.047     | 0.627     | N/A       | 3.147     | 2.865     | 0.964     |
| Hyper        | 26.628     | 0.006     | **0.007** | **0.034** | **0.023** | **0.208** | **0.129** |
| MonetDB      | 45.443     | 0.018     | 0.045     | 3.228     | 0.149     | 0.502     | 0.584     |
| PostgreSQL   | 145.774    | 1.123     | 1.866     | 2.019     | 2.044     | 54.801    | 17.835    |
|  +Index Time | 213.160    | 0.287     | 0.174     | 1.124     | 2.042     | 53.386    | 17.835    |
|  +Index All  | 610.496    | 0.281     | 2.172     | 4.099     | 2.043     | 53.389    | 17.834    |
| SparkSQL     | 16.936     | 0.449     | 0.249     | 3.264     | 0.511     | 0.974     | 1.078     |
| TimescaleDB  | 304.632    | 0.086     | 0.131     | 3.015     | 1.494     | 47.364    | 17.454    |
|  +Index All  | 606.273    | **0.001** | 0.121     | 1.395     | 1.437     | 47.303    | 17.374    |

### Benchmark 3

| System       | Load       | Q1        | Q2        | Q3        | Q4        | Q5        | Q6        |
| :----------- | :--------: | :-------: | :-------: | :-------: | :-------: | :-------: | :-------: |
| ClickHouse   | **14.5**   | 0.004     | N/A       | N/A       | 0.012     | 0.034     | 0.543     |
| CrateDB      |  |  |  |  |  |  |  |
| Druid        | 1207.445   | 0.041     | N/A       | N/A       | 0.061     | N/A       | 7.176     |
| Hyper        | 53.308     | 0.008     | **0.099** | **0.010** | **0.008** | **0.014** | **0.142** |
| MonetDB      | 61.301     | 0.039     | 1.593     | 0.041     | 0.048     | 0.090     | 8.438     |
| PostgreSQL   | 242.270    | 3.257     | 255.778   | 3.771     | 3.096     | 3.873     | 42.745    |
|  +Index Time | 310.320    | 0.127     | 254.876   | 3.803     | 3.095     | 3.891     | 42.744    |
|  +Index All  | 824.136    | 0.049     | 255.661   | 0.466     | 3.080     | 1.301     | 45.186    |
| SparkSQL     | 28.661     | 0.044     | N/A       | 0.511     | 0.141     | 1.563     | 2.055     |
| TimescaleDB  | 597.893    | 0.048     | 245.692   | 0.848     | 1.405     | 6.719     | 12.809    |
|  +Index All  | 946.893    | **0.001** | 242.173   | 0.076     | 0.084     | 0.803     | 12.803    |
